# Проект "Квест"

## Краткое описание проекта.
Проект представляет собой web-приложение - игра "Квест".
Пользователю предоставляется возможность ответить на 13 вопросов по теме "Кино" после регистрации.

###Описание основных классов проекта

1. В пакете "src/main/java/ru/javarush/quest" находятся классы, описывающие логику приложения.
2. В пакете "features" представлены классы описания свойств создаваемых сущностей (User, Answer,Question)
3. В пакете "init" представлены классы для инициализации сущностей: 
   - QuestInit - инициализирует вопросы для квеста, связь вопросов осуществляется через передачу параметра nextQuestionId следующего вопроса.
   - QuestionRepository - проверяет корректность запрашиваемых данных по вопросам квеста, управляет списком вопросов.
   - UserRepository - предназначен для хранения пользователей игры, проверки необходимости регистрации нового пользователя.
4. В корне пакета находятся классы сервлетов, отвечают за управлением приложения (переходы на нужные страницы, передача данных в обработку сервиса).
5. В пакете "service" описана логика каждого сервлета, вынесена в одноименный сервис.
6. В пакете "webapp"/"WEB-INF" представлены jsp-файлы для отображения страниц пользователю.
7. В пакете "src/test" расположены unit-тесты.

###Описание логики работы приложения
1. Инициализируются объекты приложения ("ApplicationContestListener")
2. После запуска пользователю отображается стартовая страница ("index.jsp")
3. Пользователю открывается форма регистрации. По умолчанию кнопка "Начать игру" неактивна (до ввода имени пользователя).
4. После введения имени управление передается на сервлет\сервис "RegistrationUserServlet" - "RegistrationUserService":
    - если пользователь уже ранее играл (проверка имени), то новая запись в UserRepository не создается,
    - если нет - то создается новый пользователь по шаблону "User.class".
5. Далее управление передается на сервлет\сервис "LogicServlet" - "LogicService" - "logic.jsp":
    - пользователю отображаются последовательно вопросы и предложены варианты ответов (радио-кнопки).
    - переход к следующему вопросу заблокирован, пока не будет выбран ответ (кнопка "Следующий вопрос" неактивна).
    - после каждого ответа проверяется его корректность, начисляются очки, результат сохраняется в сущность пользвателя (атрибут "point"), окончание квеста.
    - цикл продолжается до последнего вопроса (атрибут "question.isEnd=true").
6. Далее управление передается на сервлет\сервис "ResultServlet" - "ResultService" - "result.jsp":
    - осуществляется проверка набранных очков.
    - в зависимости от результата пользователю отображается сообщение.
    - предоставляются варианты сыграть еще раз или завершить.
7. Если пользователь выбирает "играть", то автоматически переходит на первый вопрос.
   - обнуляется кол-во набранных очков, но сохраняется его лучший результат.
8. Если пользователь выбирает "завершить", то автоматически переход на стартовую страницу (сервлет "RestartServlet")

###Используемые средства и технологии
- Maven (для сборки проекта)
- сервлеты
- jsp
- Tomcat 9 (для запуска проекта)
